(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(t,e,n){},15:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(7),o=n.n(r),l=(n(13),n(1)),c=n(2),s=n(4),p=n(3),d=n(5),u=(n(15),function(t){function e(){return Object(l.a)(this,e),Object(s.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement("table",{className:"Entries-list"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"ID"),i.a.createElement("th",null,"Title"),i.a.createElement("th",null,"Content"),i.a.createElement("th",null,"Created at"),i.a.createElement("th",null),i.a.createElement("th",null))),i.a.createElement("tbody",null,this.props.entries.map(function(e){return i.a.createElement("tr",{key:e.entryID,"data-id":e.entryID,"data-title":e.title,"data-content":e.content},i.a.createElement("td",null,e.entryID),i.a.createElement("td",null,e.title),i.a.createElement("td",null,e.content),i.a.createElement("td",null,e.createdAt),i.a.createElement("td",null,i.a.createElement("button",{onClick:t.props.onRemoveEntry},"\u274c")),i.a.createElement("td",null,i.a.createElement("button",{onClick:t.props.onEditEntry},"\u270d\ud83c\udffd")))})))}}]),e}(a.Component)),h=function(t){function e(){return Object(l.a)(this,e),Object(s.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{id:"submitPost"},i.a.createElement("form",{onSubmit:this.props.isEditing?this.props.onUpdateEntry:this.props.onAddEntry},i.a.createElement("label",null,"Title",i.a.createElement("input",{type:"text",name:"title",value:this.props.title,onChange:this.props.onFieldChange})),i.a.createElement("label",null,"Content",i.a.createElement("textarea",{name:"content",cols:"30",rows:"10",value:this.props.content,onChange:this.props.onFieldChange})),!0===this.props.isEditing&&i.a.createElement("button",{type:"submit"},"Update"),!1===this.props.isEditing&&i.a.createElement("button",{type:"submit"},"Create entry")))}}]),e}(a.Component),E=function(t){function e(){var t,n;Object(l.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(i)))).state={entries:[],editing:{id:0,title:"",content:""},isEditing:!1},n.apiFetchEntries=function(){fetch("/api/entries?limit=20").then(function(t){return t.json()}).then(function(t){return n.setState({entries:t.data})})},n.apiCreateEntry=function(t){fetch("/api/entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){return n.apiFetchEntries()})},n.apiDeleteEntry=function(t){fetch("/api/entries/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(){return n.apiFetchEntries()})},n.apiUpdateEntry=function(t,e){fetch("/api/entries/".concat(t),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PATCH",body:JSON.stringify(e)}).then(function(t){return t.json()}).then(console.log)},n.onAddEntry=function(t){t.preventDefault();var e=n.state.editing;if(!e.title.length>0||!e.content.length>0)return alert("Invalid input");n.apiCreateEntry(e),n.setState({editing:{title:"",content:""}})},n.onRemoveEntry=function(t){var e=t.target.parentElement.parentElement.dataset.id;n.apiDeleteEntry(e)},n.onEditEntry=function(t){var e=t.target.parentElement.parentElement.dataset,a=e.id,i=e.content,r={id:a,title:e.title,content:i},o=Object.assign({},n.state);o.isEditing=!0,o.editing=r,n.setState(o),n.apiUpdateEntry(a,r)},n.onUpdateEntry=function(t){t.preventDefault();var e=Object.assign({},n.state);e.isEditing=!1,n.setState(e);var a=n.state.editing;n.apiUpdateEntry(a.id,a),n.apiFetchEntries(),n.setState({editing:{title:"",content:""}})},n.onFieldChange=function(t){var e=t.target.name,a=Object.assign({},n.state);a.editing[e]=t.target.value,n.setState(a)},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.apiFetchEntries()}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(u,{entries:this.state.entries,onRemoveEntry:this.onRemoveEntry,onEditEntry:this.onEditEntry}),i.a.createElement(h,{onFieldChange:this.onFieldChange,title:this.state.editing.title,content:this.state.editing.content,onAddEntry:this.onAddEntry,onUpdateEntry:this.onUpdateEntry,isEditing:this.state.isEditing}))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},8:function(t,e,n){t.exports=n(17)}},[[8,2,1]]]);
//# sourceMappingURL=main.98481384.chunk.js.map